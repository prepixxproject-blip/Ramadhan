<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Adhan ¬∑ Ramadan Companion</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Ramadan">
<meta name="theme-color" content="#080811">
<meta name="mobile-web-app-capable" content="yes">
<link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --gold: #c9a84c; --gold-light: #e8c97a; --gold-dim: rgba(201,168,76,0.12);
  --dark: #080811; --panel: rgba(255,255,255,0.038); --panel2: rgba(255,255,255,0.06);
  --border: rgba(201,168,76,0.2); --border2: rgba(201,168,76,0.4);
  --text: #f0e6cc; --muted: rgba(240,230,204,0.5);
  --green: #4caf7a; --green-dim: rgba(76,175,122,0.12);
}
html { scroll-behavior: smooth; }
body { background: var(--dark); color: var(--text); font-family: 'Cinzel', serif; min-height: 100vh; overflow-x: hidden; }

.stars { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
.star { position: absolute; border-radius: 50%; background: white; animation: twinkle var(--d) ease-in-out infinite alternate; opacity: 0; }
@keyframes twinkle { to { opacity: var(--o); transform: scale(1.4); } }

.moon-wrap { position: fixed; top: 18px; right: 45px; z-index: 1; pointer-events: none; animation: floatMoon 7s ease-in-out infinite alternate; }
@keyframes floatMoon { to { transform: translateY(-14px); } }
.moon { width: 56px; height: 56px; border-radius: 50%; background: radial-gradient(circle at 38% 45%, var(--gold-light), #a07820); box-shadow: 0 0 32px rgba(201,168,76,0.5), 0 0 65px rgba(201,168,76,0.15); position: relative; }
.moon::after { content: ''; position: absolute; width: 43px; height: 43px; border-radius: 50%; background: var(--dark); top: 5px; left: 15px; }

.nav-bar { position: sticky; top: 0; z-index: 50; background: rgba(8,8,17,0.93); backdrop-filter: blur(20px); border-bottom: 1px solid var(--border); display: flex; justify-content: center; gap: 4px; padding: 9px 10px; }
.nav-tab { background: transparent; border: 1px solid transparent; color: var(--muted); font-family: 'Cinzel', serif; font-size: 0.5rem; letter-spacing: 2.5px; padding: 7px 13px; border-radius: 8px; cursor: pointer; transition: all 0.3s; text-transform: uppercase; white-space: nowrap; }
.nav-tab.active { color: var(--gold); border-color: var(--border2); background: var(--gold-dim); }
.nav-tab:hover:not(.active) { color: var(--text); border-color: var(--border); }

.section { display: none; position: relative; z-index: 2; }
.section.active { display: block; }

/* ====== PRAYER TIMES ====== */
.pt-container { max-width: 460px; margin: 0 auto; padding: 16px 16px 40px; display: flex; flex-direction: column; align-items: center; gap: 14px; }
header { text-align: center; padding-top: 18px; }
.arabic-title { font-family: 'Amiri', serif; font-size: 2.5rem; color: var(--gold); text-shadow: 0 0 28px rgba(201,168,76,0.4); letter-spacing: 2px; }
.subtitle { font-size: 0.57rem; letter-spacing: 6px; color: var(--muted); margin-top: 4px; text-transform: uppercase; }
.live-clock { font-family: 'Amiri', serif; font-size: 1rem; color: var(--muted); letter-spacing: 2px; }
.card { width: 100%; background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 17px 20px; backdrop-filter: blur(12px); position: relative; overflow: hidden; }
.card::before { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, rgba(201,168,76,0.04), transparent 60%); pointer-events: none; }
.card-label { font-size: 0.52rem; letter-spacing: 4px; color: var(--gold); text-transform: uppercase; margin-bottom: 8px; opacity: 0.8; }
.location-row { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
.location-name { font-family: 'Amiri', serif; font-size: 1.15rem; flex: 1; }
.btn { background: transparent; border: 1px solid var(--border); color: var(--gold); font-family: 'Cinzel', serif; font-size: 0.52rem; letter-spacing: 3px; padding: 7px 13px; border-radius: 8px; cursor: pointer; transition: all 0.3s; text-transform: uppercase; white-space: nowrap; }
.btn:hover { background: var(--gold-dim); border-color: var(--gold); }
.btn:disabled { opacity: 0.4; cursor: not-allowed; }
.method-select { background: transparent; border: 1px solid var(--border); color: var(--muted); font-family: 'Cinzel', serif; font-size: 0.5rem; letter-spacing: 1px; padding: 6px 10px; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 10px; appearance: none; text-align: center; }
.method-select option { background: #0d0d1f; color: var(--text); }
.times-grid { width: 100%; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.time-card { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 18px 14px; text-align: center; backdrop-filter: blur(12px); transition: all 0.4s; position: relative; overflow: hidden; }
.time-card.active { border-color: var(--gold); background: rgba(201,168,76,0.07); box-shadow: 0 0 22px rgba(201,168,76,0.12); }
.time-card.active::after { content: 'NOW'; position: absolute; top: 8px; right: 8px; font-size: 0.43rem; letter-spacing: 3px; color: var(--gold); background: rgba(201,168,76,0.15); padding: 2px 6px; border-radius: 4px; border: 1px solid rgba(201,168,76,0.3); }
.time-icon { font-size: 1.7rem; margin-bottom: 5px; display: block; }
.time-type { font-size: 0.5rem; letter-spacing: 4px; color: var(--gold); text-transform: uppercase; margin-bottom: 5px; }
.time-arabic { font-family: 'Amiri', serif; font-size: 1rem; color: var(--muted); margin-bottom: 7px; }
.time-value { font-size: 1.65rem; font-weight: 600; letter-spacing: 2px; font-variant-numeric: tabular-nums; }
.time-remaining { font-size: 0.52rem; letter-spacing: 2px; color: var(--muted); margin-top: 5px; font-family: 'Amiri', serif; font-style: italic; }
.countdown-card { width: 100%; background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 20px; text-align: center; backdrop-filter: blur(12px); }
.countdown-label { font-size: 0.52rem; letter-spacing: 4px; color: var(--gold); text-transform: uppercase; margin-bottom: 10px; opacity: 0.8; }
.countdown-next { font-family: 'Amiri', serif; font-size: 1rem; color: var(--muted); margin-bottom: 7px; }
.countdown-time { font-size: 2.7rem; font-weight: 600; color: var(--gold); letter-spacing: 4px; text-shadow: 0 0 18px rgba(201,168,76,0.3); font-variant-numeric: tabular-nums; animation: pulse 2s ease-in-out infinite; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.62} }
.adhan-card { width: 100%; background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 17px 20px; backdrop-filter: blur(12px); display: flex; align-items: center; justify-content: space-between; }
.adhan-info h3 { font-size: 0.55rem; letter-spacing: 4px; color: var(--gold); text-transform: uppercase; margin-bottom: 4px; }
.adhan-info p { font-family: 'Amiri', serif; font-size: 0.88rem; color: var(--muted); }
.toggle { position: relative; width: 50px; height: 26px; flex-shrink: 0; }
.toggle input { opacity: 0; width: 0; height: 0; }
.toggle-slider { position: absolute; cursor: pointer; inset: 0; background: rgba(255,255,255,0.07); border-radius: 26px; border: 1px solid var(--border); transition: 0.3s; }
.toggle-slider::before { content: ''; position: absolute; width: 18px; height: 18px; left: 3px; top: 3px; background: var(--muted); border-radius: 50%; transition: 0.3s; }
.toggle input:checked + .toggle-slider { background: rgba(201,168,76,0.16); border-color: var(--gold); }
.toggle input:checked + .toggle-slider::before { transform: translateX(24px); background: var(--gold); box-shadow: 0 0 10px rgba(201,168,76,0.5); }
.adhan-wave { display: none; gap: 3px; align-items: flex-end; height: 18px; margin-left: 8px; }
.adhan-wave.playing { display: flex; }
.wave-bar { width: 3px; background: var(--gold); border-radius: 2px; animation: wv 1s ease-in-out infinite alternate; }
.wave-bar:nth-child(1){height:5px;animation-delay:0s}.wave-bar:nth-child(2){height:12px;animation-delay:.15s}.wave-bar:nth-child(3){height:18px;animation-delay:.3s}.wave-bar:nth-child(4){height:12px;animation-delay:.45s}.wave-bar:nth-child(5){height:5px;animation-delay:.6s}
@keyframes wv { to { transform: scaleY(0.25); opacity: 0.35; } }
.status { font-family: 'Amiri', serif; font-size: 0.85rem; color: var(--muted); text-align: center; font-style: italic; padding: 8px; }
.divider { width: 100%; display: flex; align-items: center; gap: 10px; opacity: 0.25; }
.divider::before,.divider::after { content: ''; flex: 1; height: 1px; background: var(--gold); }
.divider span { color: var(--gold); font-size: 0.7rem; }

/* ====== DUA ====== */
.dua-container { max-width: 580px; margin: 0 auto; padding: 20px 15px 60px; }
.section-header { text-align: center; padding: 22px 0 18px; }
.section-title { font-family: 'Amiri', serif; font-size: 1.9rem; color: var(--gold); text-shadow: 0 0 20px rgba(201,168,76,0.3); }
.section-sub { font-size: 0.53rem; letter-spacing: 5px; color: var(--muted); margin-top: 5px; text-transform: uppercase; }
.dua-categories { display: flex; flex-wrap: wrap; gap: 7px; justify-content: center; margin-bottom: 18px; }
.cat-btn { background: transparent; border: 1px solid var(--border); color: var(--muted); font-family: 'Cinzel', serif; font-size: 0.48rem; letter-spacing: 2px; padding: 6px 13px; border-radius: 20px; cursor: pointer; transition: all 0.3s; text-transform: uppercase; }
.cat-btn.active { color: var(--gold); border-color: var(--gold); background: var(--gold-dim); }
.cat-btn:hover:not(.active) { color: var(--text); border-color: var(--border2); }
.dua-list { display: flex; flex-direction: column; gap: 12px; }
.dua-card { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; transition: all 0.3s; cursor: pointer; }
.dua-card:hover { border-color: rgba(201,168,76,0.32); background: var(--panel2); }
.dua-header { display: flex; align-items: center; justify-content: space-between; padding: 15px 17px; }
.dua-title-wrap { display: flex; align-items: center; gap: 11px; }
.dua-badge { font-size: 1.35rem; }
.dua-name { font-size: 0.65rem; letter-spacing: 2px; color: var(--text); }
.dua-type { font-family: 'Amiri', serif; font-size: 0.78rem; color: var(--muted); margin-top: 2px; }
.dua-chevron { color: var(--gold); font-size: 0.75rem; transition: transform 0.3s; opacity: 0.6; }
.dua-card.open .dua-chevron { transform: rotate(90deg); }
.dua-body { display: none; padding: 0 17px 17px; border-top: 1px solid var(--border); }
.dua-card.open .dua-body { display: block; }
.dua-arabic { font-family: 'Amiri', serif; font-size: 1.45rem; color: var(--gold-light); text-align: right; line-height: 2; margin: 13px 0 9px; direction: rtl; }
.dua-transliteration { font-style: italic; font-family: 'Amiri', serif; font-size: 0.83rem; color: var(--muted); margin-bottom: 9px; line-height: 1.7; }
.dua-translation { font-family: 'Amiri', serif; font-size: 0.92rem; color: var(--text); line-height: 1.8; padding: 11px 13px; background: rgba(201,168,76,0.04); border-radius: 9px; border-left: 3px solid var(--gold); margin-bottom: 9px; }
.dua-source { font-size: 0.48rem; letter-spacing: 2px; color: var(--muted); text-transform: uppercase; opacity: 0.65; }

/* ====== REWARDS ====== */
.rewards-container { max-width: 580px; margin: 0 auto; padding: 20px 15px 60px; }
.rewards-intro { background: linear-gradient(135deg, rgba(201,168,76,0.07), rgba(201,168,76,0.02)); border: 1px solid var(--border2); border-radius: 14px; padding: 18px; text-align: center; margin-bottom: 18px; }
.rewards-intro .r-arabic { font-family: 'Amiri', serif; font-size: 1.3rem; color: var(--gold); margin-bottom: 7px; line-height: 1.8; }
.rewards-intro p { font-family: 'Amiri', serif; font-size: 0.85rem; color: var(--muted); line-height: 1.7; }
.reward-tabs { display: flex; gap: 6px; justify-content: center; flex-wrap: wrap; margin-bottom: 18px; }
.rtab { background: transparent; border: 1px solid var(--border); color: var(--muted); font-family: 'Cinzel', serif; font-size: 0.47rem; letter-spacing: 2px; padding: 6px 13px; border-radius: 20px; cursor: pointer; transition: all 0.3s; text-transform: uppercase; }
.rtab.active { color: var(--green); border-color: var(--green); background: var(--green-dim); }
.rtab:hover:not(.active) { color: var(--text); }
.rewards-list { display: flex; flex-direction: column; gap: 11px; }
.reward-card { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 17px 18px; display: flex; gap: 14px; align-items: flex-start; transition: all 0.3s; position: relative; overflow: hidden; }
.reward-card::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 3px; background: var(--green); opacity: 0.55; }
.reward-card:hover { background: var(--panel2); border-color: rgba(76,175,122,0.28); }
.reward-icon { font-size: 1.75rem; flex-shrink: 0; }
.reward-content { flex: 1; }
.reward-title { font-size: 0.62rem; letter-spacing: 2px; color: var(--text); margin-bottom: 5px; }
.reward-arabic { font-family: 'Amiri', serif; font-size: 1.05rem; color: var(--gold); direction: rtl; text-align: right; margin-bottom: 5px; }
.reward-desc { font-family: 'Amiri', serif; font-size: 0.85rem; color: var(--muted); line-height: 1.7; }
.reward-hadith { margin-top: 9px; font-family: 'Amiri', serif; font-size: 0.78rem; color: rgba(76,175,122,0.88); font-style: italic; padding: 7px 11px; background: var(--green-dim); border-radius: 8px; line-height: 1.6; }
.reward-source { font-size: 0.43rem; letter-spacing: 2px; color: var(--muted); text-transform: uppercase; margin-top: 5px; opacity: 0.65; }
.multiplier { position: absolute; top: 11px; right: 13px; font-size: 0.47rem; letter-spacing: 2px; color: var(--green); background: var(--green-dim); border: 1px solid rgba(76,175,122,0.28); padding: 3px 7px; border-radius: 20px; }

.notification { position: fixed; top: 64px; left: 50%; transform: translateX(-50%) translateY(-140px); background: rgba(8,8,17,0.97); border: 1px solid var(--gold); border-radius: 13px; padding: 15px 22px; text-align: center; z-index: 200; transition: transform 0.5s cubic-bezier(0.175,0.885,0.32,1.275); box-shadow: 0 0 38px rgba(201,168,76,0.28); min-width: 240px; }
.notification.show { transform: translateX(-50%) translateY(0); }
.notif-arabic { font-family: 'Amiri', serif; font-size: 1.35rem; color: var(--gold); margin-bottom: 3px; }
.notif-text { font-size: 0.52rem; letter-spacing: 3px; color: var(--muted); text-transform: uppercase; }

footer { text-align: center; padding: 18px; font-family: 'Amiri', serif; font-size: 0.78rem; color: rgba(240,230,204,0.18); letter-spacing: 1px; }
@keyframes fadeUp { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }
.animate-in { animation: fadeUp 0.5s ease forwards; }
</style>
</head>
<body>

<div class="stars" id="stars"></div>
<div class="moon-wrap"><div class="moon"></div></div>
<div class="notification" id="notification">
  <div class="notif-arabic" id="notif-arabic">ÿßŸÑŸÑŸá ÿ£ŸÉÿ®ÿ±</div>
  <div class="notif-text" id="notif-text">Adhan Time</div>
</div>

<nav class="nav-bar">
  <button class="nav-tab active" onclick="showSection('prayer',this)">üïå Prayer Times</button>
  <button class="nav-tab" onclick="showSection('dua',this)">üìñ Dua</button>
  <button class="nav-tab" onclick="showSection('rewards',this)">‚ú® Rewards</button>
</nav>

<!-- ====== PRAYER TIMES ====== -->
<div class="section active" id="section-prayer">
<div class="pt-container">
  <header class="animate-in">
    <div class="arabic-title">ÿ±ŸÖÿ∂ÿßŸÜ ŸÉÿ±ŸäŸÖ</div>
    <div class="subtitle">Suhoor ¬∑ Iftar ¬∑ Adhan</div>
  </header>
  <div class="live-clock" id="liveClock">--:--:--</div>
  <div class="card animate-in">
    <div class="card-label">üìç Location</div>
    <div class="location-row">
      <div class="location-name" id="locationName">Detecting location...</div>
      <button class="btn" id="locBtn" onclick="getLocation()">Detect</button>
    </div>
    <select class="method-select" id="methodSelect" onchange="updateTimes()">
      <option value="2">Islamic Society of North America (ISNA)</option>
      <option value="3">Muslim World League (MWL)</option>
      <option value="4">Umm Al-Qura University, Makkah</option>
      <option value="5">Egyptian General Authority of Survey</option>
      <option value="1">University of Islamic Sciences, Karachi</option>
    </select>
  </div>
  <div class="times-grid">
    <div class="time-card animate-in" id="suhoorCard">
      <span class="time-icon">üåô</span>
      <div class="time-type">Suhoor End</div>
      <div class="time-arabic">ÿßŸÑÿ≥ÿ≠Ÿàÿ±</div>
      <div class="time-value" id="suhoorTime">--:--</div>
      <div class="time-remaining" id="suhoorRem"></div>
    </div>
    <div class="time-card animate-in" id="iftarCard">
      <span class="time-icon">üåÖ</span>
      <div class="time-type">Iftar Begin</div>
      <div class="time-arabic">ÿßŸÑÿ•ŸÅÿ∑ÿßÿ±</div>
      <div class="time-value" id="iftarTime">--:--</div>
      <div class="time-remaining" id="iftarRem"></div>
    </div>
  </div>
  <div class="countdown-card animate-in">
    <div class="countdown-label">‚è≥ Next Event</div>
    <div class="countdown-next" id="countdownLabel">Waiting for location...</div>
    <div class="countdown-time" id="countdown">--:--:--</div>
  </div>
  <div class="divider"><span>‚ùà</span></div>
  <div class="adhan-card animate-in">
    <div class="adhan-info">
      <h3>Adhan Alert</h3>
      <div style="display:flex;align-items:center;gap:8px;">
        <p id="adhanStatus">Enable adhan sound</p>
        <div class="adhan-wave" id="adhanWave">
          <div class="wave-bar"></div><div class="wave-bar"></div><div class="wave-bar"></div><div class="wave-bar"></div><div class="wave-bar"></div>
        </div>
      </div>
    </div>
    <label class="toggle"><input type="checkbox" id="adhanToggle" onchange="toggleAdhan()"><span class="toggle-slider"></span></label>
  </div>
  <div class="status" id="statusMsg">Please allow location access to get prayer times.</div>
  <footer>Powered by Aladhan API ¬∑ Times are approximate</footer>
</div>
</div>

<!-- ====== DUA ====== -->
<div class="section" id="section-dua">
<div class="dua-container">
  <div class="section-header animate-in">
    <div class="section-title">ÿ£ÿØÿπŸäÿ©</div>
    <div class="section-sub">Duas ¬∑ Daily Prayers & Supplications</div>
  </div>
  <div class="dua-categories" id="duaCategories"></div>
  <div class="dua-list" id="duaList"></div>
</div>
</div>

<!-- ====== REWARDS ====== -->
<div class="section" id="section-rewards">
<div class="rewards-container">
  <div class="section-header animate-in">
    <div class="section-title">ÿ´Ÿàÿßÿ® ÿ±ŸÖÿ∂ÿßŸÜ</div>
    <div class="section-sub">Ramadan Rewards ¬∑ Good Deeds & Sunnah</div>
  </div>
  <div class="rewards-intro animate-in">
    <div class="r-arabic">ŸÖŸéŸÜŸí ÿµŸéÿßŸÖŸé ÿ±ŸéŸÖŸéÿ∂ŸéÿßŸÜŸé ÿ•ŸêŸäŸÖŸéÿßŸÜŸãÿß ŸàŸéÿßÿ≠Ÿíÿ™Ÿêÿ≥Ÿéÿßÿ®Ÿãÿß ÿ∫ŸèŸÅŸêÿ±Ÿé ŸÑŸéŸáŸè ŸÖŸéÿß ÿ™ŸéŸÇŸéÿØŸéŸëŸÖŸé ŸÖŸêŸÜŸí ÿ∞ŸéŸÜŸíÿ®ŸêŸáŸê</div>
    <p>"Whoever fasts Ramadan out of faith and seeking reward, his previous sins will be forgiven." ‚Äî Bukhari & Muslim</p>
  </div>
  <div class="reward-tabs" id="rewardTabs"></div>
  <div class="rewards-list" id="rewardsList"></div>
</div>
</div>

<script>
// Stars
const stEl = document.getElementById('stars');
for (let i=0;i<160;i++){const s=document.createElement('div');s.className='star';const z=Math.random()*2.5+0.5;s.style.cssText=`width:${z}px;height:${z}px;left:${Math.random()*100}%;top:${Math.random()*100}%;--d:${2+Math.random()*4}s;--o:${0.2+Math.random()*0.8};animation-delay:${Math.random()*4}s;`;stEl.appendChild(s);}

// Nav
function showSection(id, btn) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('section-' + id).classList.add('active');
  if (btn) btn.classList.add('active');
  try { window.scrollTo({ top: 0, behavior: 'smooth' }); } catch(e) { window.scrollTo(0, 0); }
}

// Prayer Times
let lat=null,lon=null,cityName='',suhoorMs=null,iftarMs=null,adhanEnabled=false,suhoorNotified=false,iftarNotified=false;

function updateClock(){const n=new Date();document.getElementById('liveClock').textContent=`${String(n.getHours()).padStart(2,'0')}:${String(n.getMinutes()).padStart(2,'0')}:${String(n.getSeconds()).padStart(2,'0')}`;}
setInterval(updateClock,1000);updateClock();

function getLocation(){
  const btn=document.getElementById('locBtn');btn.disabled=true;btn.textContent='...';
  document.getElementById('statusMsg').textContent='Detecting your location...';
  document.getElementById('locationName').textContent='Detecting...';
  if(!navigator.geolocation){document.getElementById('statusMsg').textContent='Geolocation not supported.';btn.disabled=false;btn.textContent='Detect';return;}
  navigator.geolocation.getCurrentPosition(pos=>{lat=pos.coords.latitude;lon=pos.coords.longitude;reverseGeocode(lat,lon);btn.disabled=false;btn.textContent='Update';},()=>{document.getElementById('statusMsg').textContent='Location denied.';document.getElementById('locationName').textContent='Unavailable';btn.disabled=false;btn.textContent='Retry';},{timeout:10000});
}

async function reverseGeocode(la,lo){
  try{const r=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${la}&lon=${lo}&format=json`);const d=await r.json();cityName=d.address.city||d.address.town||d.address.village||'Your Location';document.getElementById('locationName').textContent=`${cityName}, ${d.address.country||''}`;}
  catch{cityName='Your Location';document.getElementById('locationName').textContent=`${la.toFixed(2)}¬∞, ${lo.toFixed(2)}¬∞`;}
  fetchPrayerTimes();
}

async function fetchPrayerTimes(){
  if(!lat||!lon)return;
  const method=document.getElementById('methodSelect').value;
  const t=new Date();const dd=String(t.getDate()).padStart(2,'0'),mm=String(t.getMonth()+1).padStart(2,'0'),yyyy=t.getFullYear();
  document.getElementById('statusMsg').textContent='Fetching prayer times...';
  try{
    const res=await fetch(`https://api.aladhan.com/v1/timings/${dd}-${mm}-${yyyy}?latitude=${lat}&longitude=${lon}&method=${method}`);
    const data=await res.json();if(data.code!==200)throw new Error();
    const{Fajr,Maghrib}=data.data.timings;
    document.getElementById('suhoorTime').textContent=Fajr;
    document.getElementById('iftarTime').textContent=Maghrib;
    suhoorMs=timeToMs(Fajr);iftarMs=timeToMs(Maghrib);
    document.getElementById('statusMsg').textContent=`Times for ${cityName} ¬∑ ${dd}/${mm}/${yyyy}`;
    updateCards();
  }catch{document.getElementById('statusMsg').textContent='Failed to fetch. Check internet connection.';}
}

function timeToMs(t){const[h,m]=t.split(':').map(Number);const n=new Date();return new Date(n.getFullYear(),n.getMonth(),n.getDate(),h,m,0).getTime();}

function updateCards(){
  if(!suhoorMs||!iftarMs)return;
  const now=Date.now();
  document.getElementById('suhoorCard').classList.toggle('active',now<suhoorMs);
  document.getElementById('iftarCard').classList.toggle('active',now>=iftarMs&&now<iftarMs+900000);
  let nextMs,nextLabel;
  if(now<suhoorMs){nextMs=suhoorMs;nextLabel='üåô Suhoor ends in';}
  else if(now<iftarMs){nextMs=iftarMs;nextLabel='üåÖ Iftar begins in';}
  else{nextMs=suhoorMs+86400000;nextLabel='üåô Suhoor ends in (tomorrow)';}
  const diff=nextMs-now;
  if(diff>0){const h=Math.floor(diff/3600000),m=Math.floor((diff%3600000)/60000),s=Math.floor((diff%60000)/1000);document.getElementById('countdownLabel').textContent=nextLabel;document.getElementById('countdown').textContent=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;}
  function rem(ms){const d=ms-now;if(d<0)return'Passed';const h=Math.floor(d/3600000),m=Math.floor((d%3600000)/60000);return h>0?`in ${h}h ${m}m`:`in ${m}m`;}
  document.getElementById('suhoorRem').textContent=rem(suhoorMs);
  document.getElementById('iftarRem').textContent=rem(iftarMs);
  if(adhanEnabled){const tol=30000;if(!suhoorNotified&&Math.abs(now-suhoorMs)<tol){suhoorNotified=true;triggerAdhan('Suhoor Time Ending','ŸàŸÇÿ™ ÿßŸÑÿ≥ÿ≠Ÿàÿ± ŸäŸÜÿ™ŸáŸä');}if(!iftarNotified&&Math.abs(now-iftarMs)<tol){iftarNotified=true;triggerAdhan('Iftar ‚Äî Break Your Fast','ÿ≠ÿßŸÜ ŸàŸÇÿ™ ÿßŸÑÿ•ŸÅÿ∑ÿßÿ±');}}
}
setInterval(updateCards,1000);
function updateTimes(){if(lat&&lon)fetchPrayerTimes();}
function toggleAdhan(){adhanEnabled=document.getElementById('adhanToggle').checked;document.getElementById('adhanStatus').textContent=adhanEnabled?'Adhan alerts enabled':'Enable adhan sound';if(!adhanEnabled)document.getElementById('adhanWave').classList.remove('playing');}
function triggerAdhan(text,arabic){const n=document.getElementById('notification');document.getElementById('notif-arabic').textContent=arabic;document.getElementById('notif-text').textContent=text;n.classList.add('show');setTimeout(()=>n.classList.remove('show'),8000);if(adhanEnabled)playAdhan();}
function playAdhan(){const AC=window.AudioContext||window.webkitAudioContext;if(!AC)return;const ctx=new AC();document.getElementById('adhanWave').classList.add('playing');document.getElementById('adhanStatus').textContent='Playing adhan...';const notes=[{f:440,t:0,d:.8},{f:494,t:.9,d:.6},{f:523,t:1.6,d:1},{f:494,t:2.7,d:.6},{f:440,t:3.4,d:1.2},{f:392,t:4.7,d:.8},{f:440,t:5.6,d:1.5},{f:392,t:7.2,d:.6},{f:349,t:7.9,d:2},{f:392,t:10,d:.8},{f:440,t:10.9,d:.6},{f:494,t:11.6,d:1},{f:523,t:12.7,d:2}];notes.forEach(n=>{const o=ctx.createOscillator(),g=ctx.createGain();o.connect(g);g.connect(ctx.destination);o.type='sine';o.frequency.value=n.f;g.gain.setValueAtTime(0,ctx.currentTime+n.t);g.gain.linearRampToValueAtTime(0.27,ctx.currentTime+n.t+0.1);g.gain.linearRampToValueAtTime(0,ctx.currentTime+n.t+n.d);o.start(ctx.currentTime+n.t);o.stop(ctx.currentTime+n.t+n.d+0.05);});setTimeout(()=>{document.getElementById('adhanWave').classList.remove('playing');document.getElementById('adhanStatus').textContent='Adhan alerts enabled';ctx.close();},16000);}

window.addEventListener('load',getLocation);

// ====== DUA DATA ======
const duas = [
  {cat:'Before Prayer',badge:'üïå',name:'Entering the Mosque',type:'ŸÇÿ®ŸÑ ÿßŸÑÿµŸÑÿßÿ©',arabic:'ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßŸÅŸíÿ™Ÿéÿ≠Ÿí ŸÑŸêŸä ÿ£Ÿéÿ®ŸíŸàŸéÿßÿ®Ÿé ÿ±Ÿéÿ≠ŸíŸÖŸéÿ™ŸêŸÉŸé',transliteration:'Allahumma iftah li abwaba rahmatik',translation:'O Allah, open for me the gates of Your mercy.',source:'Sahih Muslim 713'},
  {cat:'Before Prayer',badge:'üíß',name:'Before Wudu (Ablution)',type:'ŸÇÿ®ŸÑ ÿßŸÑŸàÿ∂Ÿàÿ°',arabic:'ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê',transliteration:'Bismillah',translation:'In the name of Allah.',source:'Abu Dawud 101'},
  {cat:'Before Prayer',badge:'üíß',name:'After Wudu',type:'ÿ®ÿπÿØ ÿßŸÑŸàÿ∂Ÿàÿ°',arabic:'ÿ£Ÿéÿ¥ŸíŸáŸéÿØŸè ÿ£ŸéŸÜŸí ŸÑŸéÿß ÿ•ŸêŸÑŸéŸáŸé ÿ•ŸêŸÑŸéŸëÿß ÿßŸÑŸÑŸéŸëŸáŸè ŸàŸéÿ≠ŸíÿØŸéŸáŸè ŸÑŸéÿß ÿ¥Ÿéÿ±ŸêŸäŸÉŸé ŸÑŸéŸáŸè ŸàŸéÿ£Ÿéÿ¥ŸíŸáŸéÿØŸè ÿ£ŸéŸÜŸéŸë ŸÖŸèÿ≠ŸéŸÖŸéŸëÿØŸãÿß ÿπŸéÿ®ŸíÿØŸèŸáŸè ŸàŸéÿ±Ÿéÿ≥ŸèŸàŸÑŸèŸáŸè',transliteration:"Ash-hadu an la ilaha illallahu wahdahu la sharika lahu wa ash-hadu anna Muhammadan abduhu wa rasuluh",translation:'I testify that there is no god but Allah, alone with no partner, and that Muhammad is His servant and messenger.',source:'Sahih Muslim 234'},
  {cat:'Before Prayer',badge:'üôè',name:'Intention (Niyyah)',type:'ÿßŸÑŸÜŸäÿ© ŸÑŸÑÿµŸÑÿßÿ©',arabic:'ŸÜŸéŸàŸéŸäŸíÿ™Ÿè ÿ£ŸéŸÜŸí ÿ£ŸèÿµŸéŸÑŸêŸëŸäŸé ŸÑŸêŸÑŸéŸëŸáŸê ÿ™ŸéÿπŸéÿßŸÑŸéŸâ',transliteration:"Nawaytu an usalli lillahi ta'ala",translation:'I intend to pray for the sake of Allah the Exalted.',source:'General Islamic Fiqh'},
  {cat:'After Prayer',badge:'üìø',name:'Tasbeeh After Prayer',type:'ÿßŸÑÿ™ÿ≥ÿ®Ÿäÿ≠ ÿ®ÿπÿØ ÿßŸÑÿµŸÑÿßÿ©',arabic:'ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸé ÿßŸÑŸÑŸéŸëŸáŸê (Ÿ£Ÿ£) ‚Ä¢ ÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê (Ÿ£Ÿ£) ‚Ä¢ ÿßŸÑŸÑŸéŸëŸáŸè ÿ£ŸéŸÉŸíÿ®Ÿéÿ±Ÿè (Ÿ£Ÿ£)',transliteration:'SubhanAllah √ó33 ¬∑ Alhamdulillah √ó33 ¬∑ Allahu Akbar √ó33',translation:'Glory be to Allah (√ó33) ¬∑ Praise be to Allah (√ó33) ¬∑ Allah is the Greatest (√ó33)',source:'Sahih Muslim 597'},
  {cat:'After Prayer',badge:'ü§≤',name:'Seeking Forgiveness',type:'ÿßŸÑÿßÿ≥ÿ™ÿ∫ŸÅÿßÿ±',arabic:'ÿ£Ÿéÿ≥Ÿíÿ™Ÿéÿ∫ŸíŸÅŸêÿ±Ÿè ÿßŸÑŸÑŸéŸëŸáŸéÿå ÿ£Ÿéÿ≥Ÿíÿ™Ÿéÿ∫ŸíŸÅŸêÿ±Ÿè ÿßŸÑŸÑŸéŸëŸáŸéÿå ÿ£Ÿéÿ≥Ÿíÿ™Ÿéÿ∫ŸíŸÅŸêÿ±Ÿè ÿßŸÑŸÑŸéŸëŸáŸé',transliteration:'Astaghfirullah, Astaghfirullah, Astaghfirullah',translation:'I seek the forgiveness of Allah (√ó3).',source:'Sahih Muslim 591'},
  {cat:'After Prayer',badge:'üìñ',name:'Ayat al-Kursi',type:'ÿ¢Ÿäÿ© ÿßŸÑŸÉÿ±ÿ≥Ÿä',arabic:'ÿßŸÑŸÑŸéŸëŸáŸè ŸÑŸéÿß ÿ•ŸêŸÑŸéŸ∞ŸáŸé ÿ•ŸêŸÑŸéŸëÿß ŸáŸèŸàŸé ÿßŸÑŸíÿ≠ŸéŸäŸèŸë ÿßŸÑŸíŸÇŸéŸäŸèŸëŸàŸÖŸè €ö ŸÑŸéÿß ÿ™Ÿéÿ£ŸíÿÆŸèÿ∞ŸèŸáŸè ÿ≥ŸêŸÜŸéÿ©Ÿå ŸàŸéŸÑŸéÿß ŸÜŸéŸàŸíŸÖŸå',transliteration:"Allahu la ilaha illa Huwal-Hayyul-Qayyum. La ta'khudhuhu sinatun wa la nawm...",translation:'Allah ‚Äî there is no deity except Him, the Ever-Living, the Sustainer of all. Neither drowsiness nor sleep overtakes Him...',source:'Quran 2:255 ¬∑ Nasai 9928'},
  {cat:'After Prayer',badge:'üõ°Ô∏è',name:'Dua for Help in Worship',type:'ÿØÿπÿßÿ° ÿßŸÑÿπŸàŸÜ ÿπŸÑŸâ ÿßŸÑÿπÿ®ÿßÿØÿ©',arabic:'ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ£ŸéÿπŸêŸÜŸêŸëŸä ÿπŸéŸÑŸéŸâ ÿ∞ŸêŸÉŸíÿ±ŸêŸÉŸé ŸàŸéÿ¥ŸèŸÉŸíÿ±ŸêŸÉŸé ŸàŸéÿ≠Ÿèÿ≥ŸíŸÜŸê ÿπŸêÿ®ŸéÿßÿØŸéÿ™ŸêŸÉŸé',transliteration:"Allahumma a'inni 'ala dhikrika wa shukrika wa husni 'ibadatik",translation:'O Allah, help me to remember You, to thank You, and to worship You in the best manner.',source:'Abu Dawud 1522'},
  {cat:'Suhoor & Iftar',badge:'üåô',name:'Intention for Fasting (Suhoor)',type:'ŸÜŸäÿ© ÿßŸÑÿµŸäÿßŸÖ',arabic:'ŸàŸéÿ®ŸêÿµŸéŸàŸíŸÖŸê ÿ∫ŸéÿØŸç ŸÜŸéŸëŸàŸéŸäŸíÿ™Ÿè ŸÖŸêŸÜŸí ÿ¥ŸéŸáŸíÿ±Ÿê ÿ±ŸéŸÖŸéÿ∂ŸéÿßŸÜŸé',transliteration:'Wa bisawmi ghadin nawaytu min shahri Ramadan',translation:'I intend to fast tomorrow in the month of Ramadan.',source:'Abu Dawud'},
  {cat:'Suhoor & Iftar',badge:'üåÖ',name:'Dua for Breaking Fast (Iftar)',type:'ÿØÿπÿßÿ° ÿßŸÑÿ•ŸÅÿ∑ÿßÿ±',arabic:'ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ŸÑŸéŸÉŸé ÿµŸèŸÖŸíÿ™Ÿè ŸàŸéÿ®ŸêŸÉŸé ÿ¢ŸÖŸéŸÜŸíÿ™Ÿè ŸàŸéÿπŸéŸÑŸéŸäŸíŸÉŸé ÿ™ŸéŸàŸéŸÉŸéŸëŸÑŸíÿ™Ÿè ŸàŸéÿπŸéŸÑŸéŸâ ÿ±Ÿêÿ≤ŸíŸÇŸêŸÉŸé ÿ£ŸéŸÅŸíÿ∑Ÿéÿ±Ÿíÿ™Ÿè',transliteration:"Allahumma laka sumtu wa bika amantu wa 'alayka tawakkaltu wa 'ala rizqika aftartu",translation:'O Allah! For You I fasted, in You I believe, upon You I rely, and with Your provision I break my fast.',source:'Abu Dawud 2358'},
  {cat:'Suhoor & Iftar',badge:'üåÖ',name:'Alternate Iftar Dua',type:'ÿØÿπÿßÿ° ÿ¢ÿÆÿ± ŸÑŸÑÿ•ŸÅÿ∑ÿßÿ±',arabic:'ÿ∞ŸéŸáŸéÿ®Ÿé ÿßŸÑÿ∏ŸéŸëŸÖŸéÿ£Ÿè ŸàŸéÿßÿ®Ÿíÿ™ŸéŸÑŸéŸëÿ™Ÿê ÿßŸÑŸíÿπŸèÿ±ŸèŸàŸÇŸè ŸàŸéÿ´Ÿéÿ®Ÿéÿ™Ÿé ÿßŸÑÿ£Ÿéÿ¨Ÿíÿ±Ÿè ÿ•ŸêŸÜŸí ÿ¥Ÿéÿßÿ°Ÿé ÿßŸÑŸÑŸéŸëŸáŸè',transliteration:"Dhahaba adh-dhama' wabtallatil 'uruq wa thabatal ajru in sha' Allah",translation:'The thirst has gone, the veins are moistened, and the reward is confirmed, if Allah wills.',source:'Abu Dawud 2357'},
  {cat:'Morning & Evening',badge:'üå§Ô∏è',name:'Morning Dua',type:'ÿØÿπÿßÿ° ÿßŸÑÿµÿ®ÿßÿ≠',arabic:'ÿ£ŸéÿµŸíÿ®Ÿéÿ≠ŸíŸÜŸéÿß ŸàŸéÿ£ŸéÿµŸíÿ®Ÿéÿ≠Ÿé ÿßŸÑŸíŸÖŸèŸÑŸíŸÉŸè ŸÑŸêŸÑŸéŸëŸáŸê ŸàŸéÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê',transliteration:'Asbahna wa asbahal mulku lillah, wal hamdu lillah',translation:'We have entered a new morning and the whole kingdom belongs to Allah; all praise is for Allah.',source:'Muslim 2723'},
  {cat:'Morning & Evening',badge:'üåô',name:'Evening Dua',type:'ÿØÿπÿßÿ° ÿßŸÑŸÖÿ≥ÿßÿ°',arabic:'ÿ£ŸéŸÖŸíÿ≥ŸéŸäŸíŸÜŸéÿß ŸàŸéÿ£ŸéŸÖŸíÿ≥ŸéŸâ ÿßŸÑŸíŸÖŸèŸÑŸíŸÉŸè ŸÑŸêŸÑŸéŸëŸáŸê ŸàŸéÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê',transliteration:'Amsayna wa amsal mulku lillah, wal hamdu lillah',translation:'We have entered the evening and the whole kingdom belongs to Allah; all praise is for Allah.',source:'Muslim 2723'},
  {cat:'Morning & Evening',badge:'üõ°Ô∏è',name:'Morning Protection',type:'ÿØÿπÿßÿ° ÿßŸÑÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿµÿ®ÿßÿ≠Ÿäÿ©',arabic:"ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑŸéŸëÿ∞ŸêŸä ŸÑŸéÿß ŸäŸéÿ∂Ÿèÿ±ŸèŸë ŸÖŸéÿπŸé ÿßÿ≥ŸíŸÖŸêŸáŸê ÿ¥ŸéŸäŸíÿ°Ÿå ŸÅŸêŸä ÿßŸÑÿ£Ÿéÿ±Ÿíÿ∂Ÿê ŸàŸéŸÑŸéÿß ŸÅŸêŸä ÿßŸÑÿ≥ŸéŸëŸÖŸéÿßÿ°Ÿê",transliteration:"Bismillahil-ladhi la yadurru ma' ismihi shay'un fil-ardi wa la fis-sama'",translation:'In the name of Allah, with Whose name nothing on earth or in heaven can cause harm.',source:'Abu Dawud 5088'},
  {cat:"Laylat al-Qadr",badge:'‚≠ê',name:"Dua for the Night of Power",type:"ÿØÿπÿßÿ° ŸÑŸäŸÑÿ© ÿßŸÑŸÇÿØÿ±",arabic:"ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ•ŸêŸÜŸéŸëŸÉŸé ÿπŸéŸÅŸèŸàŸåŸë ÿ™Ÿèÿ≠Ÿêÿ®ŸèŸë ÿßŸÑŸíÿπŸéŸÅŸíŸàŸé ŸÅŸéÿßÿπŸíŸÅŸè ÿπŸéŸÜŸêŸëŸä",transliteration:"Allahumma innaka 'afuwwun tuhibbul 'afwa fa'fu 'anni",translation:"O Allah, You are Forgiving and love forgiveness, so forgive me.",source:"Tirmidhi 3513 ‚Äî Taught by Prophet Ô∑∫ to Aisha RA"},
  {cat:'General Duas',badge:'ü§≤',name:'Dua for Parents',type:'ÿØÿπÿßÿ° ŸÑŸÑŸàÿßŸÑÿØŸäŸÜ',arabic:'ÿ±Ÿéÿ®ŸêŸë ÿßÿ∫ŸíŸÅŸêÿ±Ÿí ŸÑŸêŸä ŸàŸéŸÑŸêŸàŸéÿßŸÑŸêÿØŸéŸäŸéŸë ŸàŸéŸÑŸêŸÑŸíŸÖŸèÿ§ŸíŸÖŸêŸÜŸêŸäŸÜŸé',transliteration:'Rabbi ghfir li wa liwalidayya wa lil mu\'minin',translation:'My Lord, forgive me and my parents and the believers.',source:'Quran 14:41'},
  {cat:'General Duas',badge:'üí°',name:'Dua for Guidance',type:'ÿØÿπÿßÿ° ÿßŸÑŸáÿØÿßŸäÿ©',arabic:'ÿ±Ÿéÿ®ŸéŸëŸÜŸéÿß ŸÑŸéÿß ÿ™Ÿèÿ≤Ÿêÿ∫Ÿí ŸÇŸèŸÑŸèŸàÿ®ŸéŸÜŸéÿß ÿ®ŸéÿπŸíÿØŸé ÿ•Ÿêÿ∞Ÿí ŸáŸéÿØŸéŸäŸíÿ™ŸéŸÜŸéÿß ŸàŸéŸáŸéÿ®Ÿí ŸÑŸéŸÜŸéÿß ŸÖŸêŸÜ ŸÑŸéŸëÿØŸèŸÜŸÉŸé ÿ±Ÿéÿ≠ŸíŸÖŸéÿ©Ÿã',transliteration:"Rabbana la tuzigh qulubana ba'da idh hadaytana wa hab lana min ladunka rahmah",translation:'Our Lord, let not our hearts deviate after You have guided us, and grant us mercy from Yourself.',source:'Quran 3:8'},
  {cat:'General Duas',badge:'üåø',name:'Dua for Ease',type:'ÿØÿπÿßÿ° ÿ™Ÿäÿ≥Ÿäÿ± ÿßŸÑÿ£ŸÖÿ±',arabic:'ÿ±Ÿéÿ®ŸêŸë ÿßÿ¥Ÿíÿ±Ÿéÿ≠Ÿí ŸÑŸêŸä ÿµŸéÿØŸíÿ±ŸêŸä ŸàŸéŸäŸéÿ≥ŸêŸëÿ±Ÿí ŸÑŸêŸä ÿ£ŸéŸÖŸíÿ±ŸêŸä',transliteration:'Rabbi ishrah li sadri wa yassir li amri',translation:'My Lord, expand my breast and ease my task for me.',source:'Quran 20:25-26'},
  {cat:'General Duas',badge:'üíö',name:'Dua for Good in Dunya & Akhirah',type:'ÿØÿπÿßÿ° ÿßŸÑÿÆŸäÿ± ŸÅŸä ÿßŸÑÿØŸÜŸäÿß ŸàÿßŸÑÿ¢ÿÆÿ±ÿ©',arabic:'ÿ±Ÿéÿ®ŸéŸëŸÜŸéÿß ÿ¢ÿ™ŸêŸÜŸéÿß ŸÅŸêŸä ÿßŸÑÿØŸèŸëŸÜŸíŸäŸéÿß ÿ≠Ÿéÿ≥ŸéŸÜŸéÿ©Ÿã ŸàŸéŸÅŸêŸä ÿßŸÑÿ¢ÿÆŸêÿ±Ÿéÿ©Ÿê ÿ≠Ÿéÿ≥ŸéŸÜŸéÿ©Ÿã ŸàŸéŸÇŸêŸÜŸéÿß ÿπŸéÿ∞Ÿéÿßÿ®Ÿé ÿßŸÑŸÜŸéŸëÿßÿ±Ÿê',transliteration:"Rabbana atina fid-dunya hasanatan wa fil-akhirati hasanatan wa qina 'adhaban-nar",translation:'Our Lord, give us good in this world and good in the Hereafter, and save us from the punishment of the Fire.',source:'Quran 2:201 ‚Äî Most recited dua of the Prophet Ô∑∫'},
];

const duaCats = ['All',...new Set(duas.map(d=>d.cat))];
let activeDuaCat='All';

function buildDuaUI(){
  document.getElementById('duaCategories').innerHTML=duaCats.map(c=>`<button class="cat-btn ${c==='All'?'active':''}" onclick="filterDuas('${c}',this)">${c}</button>`).join('');
  renderDuas();
}

function filterDuas(cat,btn){activeDuaCat=cat;document.querySelectorAll('.cat-btn').forEach(b=>b.classList.remove('active'));if(btn)btn.classList.add('active');renderDuas();}

function renderDuas(){
  const f=activeDuaCat==='All'?duas:duas.filter(d=>d.cat===activeDuaCat);
  document.getElementById('duaList').innerHTML=f.map(d=>`
    <div class="dua-card" onclick="this.classList.toggle('open')">
      <div class="dua-header">
        <div class="dua-title-wrap"><span class="dua-badge">${d.badge}</span><div><div class="dua-name">${d.name}</div><div class="dua-type">${d.type}</div></div></div>
        <span class="dua-chevron">‚ñ∂</span>
      </div>
      <div class="dua-body">
        <div class="dua-arabic">${d.arabic}</div>
        <div class="dua-transliteration">${d.transliteration}</div>
        <div class="dua-translation">${d.translation}</div>
        <div class="dua-source">Source: ${d.source}</div>
      </div>
    </div>`).join('');
}

// ====== REWARDS DATA ======
const rewards = [
  {cat:'Fasting',icon:'üåô',title:'Fasting in Ramadan',arabic:'ÿµŸäÿßŸÖ ÿ±ŸÖÿ∂ÿßŸÜ',desc:'Every good deed is multiplied by 10 to 700 times, but fasting is special ‚Äî Allah says He alone will reward it, without any limit.',hadith:'"Every deed of the son of Adam is multiplied up to 700 times. Allah says: \'Except fasting, for it is for Me and I shall reward for it without limit.\'" ‚Äî Sahih Muslim 1151',multiplier:'√ó Unlimited',source:'Sahih Muslim 1151'},
  {cat:'Fasting',icon:'üå¨Ô∏è',title:'Breath of the Fasting Person',arabic:'ÿÆŸÑŸàŸÅ ŸÅŸÖ ÿßŸÑÿµÿßÿ¶ŸÖ',desc:'The breath odor of a fasting Muslim is more beloved to Allah than the fragrance of musk on the Day of Judgment.',hadith:'"The smell coming out of the mouth of a fasting person is better to Allah than the smell of musk." ‚Äî Bukhari 1904',multiplier:'üíé Beloved to Allah',source:'Bukhari 1904'},
  {cat:'Fasting',icon:'üîë',title:'Gates of Heaven Opened',arabic:'ŸÅÿ™ÿ≠ ÿ£ÿ®Ÿàÿßÿ® ÿßŸÑÿ¨ŸÜÿ©',desc:'During Ramadan all gates of Paradise are opened, all gates of Hellfire are closed, and the devils are chained ‚Äî a mercy exclusive to this month.',hadith:'"When Ramadan enters, the gates of Paradise are opened, gates of Hellfire are closed, and devils are chained." ‚Äî Bukhari 1899',multiplier:'üåü Exclusive Month',source:'Bukhari 1899'},
  {cat:'Prayer (Salah)',icon:'üïå',title:'Praying Taraweeh',arabic:'ÿµŸÑÿßÿ© ÿßŸÑÿ™ÿ±ÿßŸàŸäÿ≠',desc:'Whoever stands in prayer during the nights of Ramadan with sincere faith and hope for reward will have all their past sins forgiven.',hadith:'"Whoever prays the night in Ramadan with faith and seeking reward, his previous sins will be forgiven." ‚Äî Bukhari 37',multiplier:'√ó Full Forgiveness',source:'Bukhari 37'},
  {cat:'Prayer (Salah)',icon:'üë•',title:'Prayer in Congregation',arabic:'ÿßŸÑÿµŸÑÿßÿ© ŸÅŸä ÿ¨ŸÖÿßÿπÿ©',desc:'Praying Taraweeh in congregation multiplies the reward 27 times compared to praying alone ‚Äî making every night exponentially more rewarding.',hadith:'"Prayer in congregation is 27 times superior to prayer offered alone." ‚Äî Bukhari 645',multiplier:'√ó 27',source:'Bukhari 645'},
  {cat:'Prayer (Salah)',icon:'‚≠ê',title:"Laylat al-Qadr Prayer",arabic:"ŸÇŸäÿßŸÖ ŸÑŸäŸÑÿ© ÿßŸÑŸÇÿØÿ±",desc:"Worship on the Night of Power equals more than 1,000 months (83 years) of worship. Seeking it in the last 10 odd nights is the Sunnah.",hadith:'"The Night of Al-Qadr is better than a thousand months." ‚Äî Quran 97:3',multiplier:'√ó 1,000 Months',source:'Quran 97:3'},
  {cat:'Quran',icon:'üìñ',title:'Every Letter of Quran',arabic:'ÿ™ŸÑÿßŸàÿ© ÿßŸÑŸÇÿ±ÿ¢ŸÜ',desc:'Each letter earns 10 good deeds, multiplied further in Ramadan. "Alif Lam Mim" is 30 rewards alone ‚Äî before the Ramadan multiplier applies.',hadith:'"Whoever reads a letter from the Book of Allah receives a good deed, and a good deed is multiplied by ten." ‚Äî Tirmidhi 2910',multiplier:'√ó 10+ per Letter',source:'Tirmidhi 2910'},
  {cat:'Quran',icon:'üåü',title:'Learning & Teaching Quran',arabic:'ÿ™ÿπŸÑŸÖ ÿßŸÑŸÇÿ±ÿ¢ŸÜ Ÿàÿ™ÿπŸÑŸäŸÖŸá',desc:'The best of people in the sight of Allah are those who learn the Quran and teach it to others ‚Äî especially in Ramadan.',hadith:'"The best among you are those who learn the Quran and teach it." ‚Äî Bukhari 5027',multiplier:'üèÜ Best of People',source:'Bukhari 5027'},
  {cat:'Charity (Sadaqah)',icon:'üíõ',title:'Giving Sadaqah in Ramadan',arabic:'ÿßŸÑÿµÿØŸÇÿ© ŸÅŸä ÿ±ŸÖÿ∂ÿßŸÜ',desc:'The Prophet Ô∑∫ was most generous in Ramadan, like a swift wind that brings rain everywhere. Charity in Ramadan carries exceptional reward.',hadith:'"The Prophet was the most generous of all people, and he was most generous during Ramadan." ‚Äî Bukhari 1902',multiplier:'√ó Most Generous',source:'Bukhari 1902'},
  {cat:'Charity (Sadaqah)',icon:'üçΩÔ∏è',title:'Feeding a Fasting Person',arabic:'ÿ•ŸÅÿ∑ÿßÿ± ÿßŸÑÿµÿßÿ¶ŸÖ',desc:"Providing food for someone to break their fast gives you the full reward of that person's entire fast ‚Äî without reducing their reward by a single bit.",hadith:'"Whoever provides iftar for a fasting person will have a reward like his, without reducing his reward in the slightest." ‚Äî Tirmidhi 807',multiplier:'√ó Equal Reward',source:'Tirmidhi 807'},
  {cat:'Charity (Sadaqah)',icon:'üíß',title:'Zakat al-Fitr',arabic:'ÿ≤ŸÉÿßÿ© ÿßŸÑŸÅÿ∑ÿ±',desc:'Obligatory charity given before Eid prayer. It purifies the fasting person from idle talk and provides food for the poor.',hadith:'"The Prophet prescribed Zakat al-Fitr to purify the fasting person from idle and obscene speech." ‚Äî Abu Dawud 1609',multiplier:'üåø Purification',source:'Abu Dawud 1609'},
  {cat:'Sunnah Deeds',icon:'üåô',title:'Eating Suhoor',arabic:'ÿ®ÿ±ŸÉÿ© ÿßŸÑÿ≥ÿ≠Ÿàÿ±',desc:'Eating Suhoor is a blessed Sunnah. Even a sip of water earns blessings. Allah and His angels send salutations upon those who eat Suhoor.',hadith:'"Eat suhoor, for in suhoor there is barakah (blessing)." ‚Äî Bukhari 1923',multiplier:'üåô Barakah',source:'Bukhari 1923'},
  {cat:'Sunnah Deeds',icon:'üè†',title:"I'tikaf (Seclusion)",arabic:'ÿßŸÑÿßÿπÿ™ŸÉÿßŸÅ',desc:"Spending the last 10 nights of Ramadan in the mosque in dedicated worship ‚Äî the Sunnah the Prophet Ô∑∫ maintained every year of his life.",hadith:'"The Prophet used to practice I\'tikaf in the last ten days of Ramadan until he passed away." ‚Äî Bukhari 2025',multiplier:'‚≠ê Catch Laylat al-Qadr',source:'Bukhari 2025'},
  {cat:'Sunnah Deeds',icon:'üòä',title:'Good Character & Smiling',arabic:'ÿ≠ÿ≥ŸÜ ÿßŸÑÿÆŸÑŸÇ',desc:'Your smile to a Muslim is charity. Maintaining patience and good character while fasting ‚Äî responding to provocation with "I am fasting" ‚Äî is itself worship.',hadith:'"Your smiling in the face of your brother is charity." ‚Äî Tirmidhi 1956',multiplier:'üíõ Charity',source:'Tirmidhi 1956'},
  {cat:'Sunnah Deeds',icon:'üôè',title:'Dua at Iftar Time',arabic:'ÿØÿπÿßÿ° ÿπŸÜÿØ ÿßŸÑÿ•ŸÅÿ∑ÿßÿ±',desc:'The dua of a fasting person at the moment of breaking their fast is one of three prayers that are never rejected by Allah.',hadith:'"Three prayers are not rejected: the prayer of a fasting person when breaking the fast." ‚Äî Tirmidhi 3598',multiplier:'‚úÖ Never Rejected',source:'Tirmidhi 3598'},
  {cat:'Sunnah Deeds',icon:'üîÑ',title:'Dhikr & Istighfar',arabic:'ÿßŸÑÿ∞ŸÉÿ± ŸàÿßŸÑÿßÿ≥ÿ™ÿ∫ŸÅÿßÿ±',desc:"Constant remembrance of Allah ‚Äî SubhanAllah, Alhamdulillah, Allahu Akbar, La ilaha illallah ‚Äî plants trees in Paradise. Istighfar (seeking forgiveness) opens doors of mercy.",hadith:'"SubhanAllah, Alhamdulillah, La ilaha illallah, Allahu Akbar ‚Äî these four words are more beloved to me than all that the sun shines upon." ‚Äî Muslim 2695',multiplier:'üå≥ Trees in Paradise',source:'Muslim 2695'},
];

const rewardCats=[...new Set(rewards.map(r=>r.cat))];
let activeRCat=rewardCats[0];

function buildRewardsUI(){
  document.getElementById('rewardTabs').innerHTML=rewardCats.map((c,i)=>`<button class="rtab ${i===0?'active':''}" onclick="filterRewards('${c}',this)">${c}</button>`).join('');
  renderRewards();
}

function filterRewards(cat,btn){activeRCat=cat;document.querySelectorAll('.rtab').forEach(b=>b.classList.remove('active'));if(btn)btn.classList.add('active');renderRewards();}

function renderRewards(){
  const f=rewards.filter(r=>r.cat===activeRCat);
  document.getElementById('rewardsList').innerHTML=f.map(r=>`
    <div class="reward-card animate-in">
      <div class="reward-icon">${r.icon}</div>
      <div class="reward-content">
        <div class="reward-title">${r.title}</div>
        <div class="reward-arabic">${r.arabic}</div>
        <div class="reward-desc">${r.desc}</div>
        <div class="reward-hadith">${r.hadith}</div>
        <div class="reward-source">Reference: ${r.source}</div>
      </div>
      <div class="multiplier">${r.multiplier}</div>
    </div>`).join('');
}

buildDuaUI();
buildRewardsUI();
</script>
</body>
</html>
